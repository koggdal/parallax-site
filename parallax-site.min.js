/*
Parallax Site 1.0
https://github.com/koggdal/parallax-site

Copyright 2011 Johannes Koggdal (http://koggdal.com/)
Developed for BombayWorks (http://bombayworks.com/)

Released under MIT license
*/
window.parallaxSite=function(a,b,c,d){var e=[],f=[],g="y",h=10,i="50%",j=c(a),k,l=function(){var a,b,d,f,l,m,n,o,p,q,r;q=e.length-1,r=e[0].eq(0).data("speed"),q=e.length,q=q>1?q-1:r!=="normal"&&r!==h?q:q-1,a=g==="y"?j.scrollTop():j.scrollLeft();for(b=0;b<q;b++)d=e[b],f=d.data("speed"),l=-(a/(h/f)),d.each(function(b){m=c(this),m.data("background")===!0?(l+=b===0?0:320,g==="y"?n=i+" "+l+"px":n=l+"px "+i,m.css({backgroundPosition:n})):(o=m.data("offset"+g.toUpperCase()),o=(o-a)*(f/h),p=g==="y"?"top":"left",m.css(p,o))});typeof k=="function"&&k()};return{create:function(b){var j=this;b=c.extend({normalSpeed:10,direction:"y",bgPos:"50%",disableTouchDevices:!0},b||{}),g=b.direction,h=b.normalSpeed,i=b.bgPos,k=b.callback;var m,n;c('[data-layer="true"]').each(function(){var a=c(this).data("speed"),e;a==="normal"&&(a=b.normalSpeed),a=a>b.normalSpeed?b.normalSpeed:Math.round(a),f[a]===d&&(f[a]=c()),e=f[a].length+a*100,c(this).data("background")!==!0&&a<b.normalSpeed&&(c(this).data("offsetX",c(this).position().left),c(this).data("offsetY",c(this).position().top),c(this).css({position:j.hasSupport?"fixed":"absolute",zIndex:e})),a===b.normalSpeed&&(c(this).css("position")==="static"?c(this).css({position:"absolute",zIndex:e}):c(this).css({zIndex:e})),f[a]=f[a].add(this)});for(m=0;m<f.length;m++)f[m]!==d&&e.push(f[m]);return c('[data-background="true"]').addClass("active"),this.hasSupport&&b.disableTouchDevices?(c("body").addClass("parallax"),c(a).bind("scroll",l),l()):c("body").addClass("no-parallax"),{layers:e,hasSupport:this.hasSupport,triggerScroll:l}},hasSupport:function(){var b=a.navigator.platform,c=a.navigator.userAgent;return b==="iPad"||b==="iPhone"||b==="iPod"?!1:~c.indexOf("android")?!1:!0}()}}(window,document,jQuery)